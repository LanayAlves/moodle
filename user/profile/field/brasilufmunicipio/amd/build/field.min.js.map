{"version":3,"file":"field.min.js","sources":["../src/field.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle opening a dialogue to configure condition data.\n *\n * @module     profilefield_brasilufmunicipio/field\n * @copyright  2021 Daniel Neis Araujo <daniel@adapta.online>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(\n    ['core/ajax'],\n    function(ajax) {\n\n        var fieldname = '';\n\n        var get_municipios = function(municipio) {\n            let uf = document.getElementsByName(fieldname + '_uf')[0];\n            let municipioselect = document.getElementsByName(fieldname  + '_municipio')[0];\n            municipioselect.innerHTML = \"\";\n            ajax.call([{\n                methodname: 'profilefield_brasilufmunicipio_get_municipios',\n                args: {uf: uf.options[uf.selectedIndex].value},\n                done: function(municipios) {\n                    municipioselect.disabled = false;\n                    for (let i = 0; i < municipios.length; i++) {\n                        let opt = document.createElement('option');\n                        opt.value = municipios[i].ibgeid;\n                        opt.innerHTML = municipios[i].municipio;\n                        municipioselect.appendChild(opt);\n                    }\n                    if (municipio != 'undefined') {\n                        municipioselect.value = municipio;\n                    }\n                    return true;\n                }\n            }]);\n        };\n\n        return {\n            init: function(municipio, fieldnameparam) {\n                fieldname = fieldnameparam;\n                let uf = document.getElementsByName(fieldname + '_uf')[0];\n                if (uf.options[uf.selectedIndex].value !== 'undefined') {\n                    get_municipios(municipio, fieldname);\n                }\n                uf.addEventListener('change', get_municipios);\n            }\n        };\n    }\n);\n"],"names":["define","ajax","fieldname","get_municipios","municipio","uf","document","getElementsByName","municipioselect","innerHTML","call","methodname","args","options","selectedIndex","value","done","municipios","disabled","i","length","opt","createElement","ibgeid","appendChild","init","fieldnameparam","addEventListener"],"mappings":";;;;;;;AAsBAA,8CACI,CAAC,cACD,SAASC,UAEDC,UAAY,GAEZC,eAAiB,SAASC,eACtBC,GAAKC,SAASC,kBAAkBL,UAAY,OAAO,GACnDM,gBAAkBF,SAASC,kBAAkBL,UAAa,cAAc,GAC5EM,gBAAgBC,UAAY,GAC5BR,KAAKS,KAAK,CAAC,CACPC,WAAY,gDACZC,KAAM,CAACP,GAAIA,GAAGQ,QAAQR,GAAGS,eAAeC,OACxCC,KAAM,SAASC,YACXT,gBAAgBU,UAAW,MACtB,IAAIC,EAAI,EAAGA,EAAIF,WAAWG,OAAQD,IAAK,KACpCE,IAAMf,SAASgB,cAAc,UACjCD,IAAIN,MAAQE,WAAWE,GAAGI,OAC1BF,IAAIZ,UAAYQ,WAAWE,GAAGf,UAC9BI,gBAAgBgB,YAAYH,WAEf,aAAbjB,YACAI,gBAAgBO,MAAQX,YAErB,aAKZ,CACHqB,KAAM,SAASrB,UAAWsB,gBACtBxB,UAAYwB,mBACRrB,GAAKC,SAASC,kBAAkBL,UAAY,OAAO,GACZ,cAAvCG,GAAGQ,QAAQR,GAAGS,eAAeC,OAC7BZ,eAAeC,WAEnBC,GAAGsB,iBAAiB,SAAUxB"}