{"version":3,"sources":["../src/field.js"],"names":["define","ajax","fieldname","get_municipios","municipio","uf","document","getElementsByName","municipioselect","innerHTML","call","methodname","args","options","selectedIndex","value","done","municipios","disabled","i","opt","length","createElement","id","name","appendChild","init","fieldnameparam","addEventListener"],"mappings":"AAsBAA,OAAM,wCACF,CAAC,WAAD,CADE,CAEF,SAASC,CAAT,CAAe,IAEPC,CAAAA,CAAS,CAAG,EAFL,CAIPC,CAAc,CAAG,SAASC,CAAT,CAAoB,IACjCC,CAAAA,CAAE,CAAGC,QAAQ,CAACC,iBAAT,CAA2BL,CAAS,CAAG,KAAvC,EAA8C,CAA9C,CAD4B,CAEjCM,CAAe,CAAGF,QAAQ,CAACC,iBAAT,CAA2BL,CAAS,CAAI,YAAxC,EAAsD,CAAtD,CAFe,CAGrCM,CAAe,CAACC,SAAhB,CAA4B,EAA5B,CACAR,CAAI,CAACS,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,+CADL,CAEPC,IAAI,CAAE,CAACP,EAAE,CAAEA,CAAE,CAACQ,OAAH,CAAWR,CAAE,CAACS,aAAd,EAA6BC,KAAlC,CAFC,CAGPC,IAAI,CAAE,cAASC,CAAT,CAAqB,CACvBT,CAAe,CAACU,QAAhB,IACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAR,CACGC,CADR,CAAgBD,CAAC,CAAGF,CAAU,CAACI,MAA/B,CAAuCF,CAAC,EAAxC,CAA4C,CACpCC,CADoC,CAC9Bd,QAAQ,CAACgB,aAAT,CAAuB,QAAvB,CAD8B,CAExCF,CAAG,CAACL,KAAJ,CAAYE,CAAU,CAACE,CAAD,CAAV,CAAcI,EAA1B,CACAH,CAAG,CAACX,SAAJ,CAAgBQ,CAAU,CAACE,CAAD,CAAV,CAAcK,IAA9B,CACAhB,CAAe,CAACiB,WAAhB,CAA4BL,CAA5B,CACH,CACD,GAAiB,WAAb,EAAAhB,CAAJ,CAA8B,CAC1BI,CAAe,CAACO,KAAhB,CAAwBX,CAC3B,CACD,QACH,CAfM,CAAD,CAAV,CAiBH,CAzBU,CA2BX,MAAO,CACHsB,IAAI,CAAE,cAAStB,CAAT,CAAoBuB,CAApB,CAAoC,CACtCzB,CAAS,CAAGyB,CAAZ,CACA,GAAItB,CAAAA,CAAE,CAAGC,QAAQ,CAACC,iBAAT,CAA2BL,CAAS,CAAG,KAAvC,EAA8C,CAA9C,CAAT,CACA,GAA2C,WAAvC,GAAAG,CAAE,CAACQ,OAAH,CAAWR,CAAE,CAACS,aAAd,EAA6BC,KAAjC,CAAwD,CACpDZ,CAAc,CAACC,CAAD,CAAYF,CAAZ,CACjB,CACDG,CAAE,CAACuB,gBAAH,CAAoB,QAApB,CAA8BzB,CAA9B,CACH,CARE,CAUV,CAvCC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handle opening a dialogue to configure condition data.\n *\n * @module     profilefield_brasilufmunicipio/field\n * @copyright  2021 Daniel Neis Araujo <daniel@adapta.online>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(\n    ['core/ajax'],\n    function(ajax) {\n\n        var fieldname = '';\n\n        var get_municipios = function(municipio) {\n            let uf = document.getElementsByName(fieldname + '_uf')[0];\n            let municipioselect = document.getElementsByName(fieldname  + '_municipio')[0];\n            municipioselect.innerHTML = \"\";\n            ajax.call([{\n                methodname: 'profilefield_brasilufmunicipio_get_municipios',\n                args: {uf: uf.options[uf.selectedIndex].value},\n                done: function(municipios) {\n                    municipioselect.disabled = false;\n                    for (let i = 0; i < municipios.length; i++) {\n                        let opt = document.createElement('option');\n                        opt.value = municipios[i].id;\n                        opt.innerHTML = municipios[i].name;\n                        municipioselect.appendChild(opt);\n                    }\n                    if (municipio != 'undefined') {\n                        municipioselect.value = municipio;\n                    }\n                    return true;\n                }\n            }]);\n        };\n\n        return {\n            init: function(municipio, fieldnameparam) {\n                fieldname = fieldnameparam;\n                let uf = document.getElementsByName(fieldname + '_uf')[0];\n                if (uf.options[uf.selectedIndex].value !== 'undefined') {\n                    get_municipios(municipio, fieldname);\n                }\n                uf.addEventListener('change', get_municipios);\n            }\n        };\n    }\n);\n"],"file":"field.min.js"}